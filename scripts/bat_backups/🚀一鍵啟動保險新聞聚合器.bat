@echo off
chcp 65001 >nul
title å°ç£ä¿éšªæ–°èžèšåˆå™¨ - ä¸€éµå•Ÿå‹•

:: è¨­å®šå½©è‰²è¼¸å‡º
color 0A

echo.
echo     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
echo     â–ˆ                                              â–ˆ
echo     â–ˆ    å°ç£ä¿éšªæ–°èžèšåˆå™¨ ä¸€éµå•Ÿå‹•ç¨‹åº            â–ˆ
echo     â–ˆ    Taiwan Insurance News Aggregator          â–ˆ
echo     â–ˆ    One-Click Startup                         â–ˆ
echo     â–ˆ                                              â–ˆ
echo     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
echo.
echo     æ­£åœ¨æª¢æŸ¥ç³»çµ±ç’°å¢ƒ...
echo.

:: æª¢æŸ¥æ˜¯å¦åœ¨æ­£ç¢ºç›®éŒ„
if not exist "apps\start_app.py" (
    echo [éŒ¯èª¤] ç„¡æ³•æ‰¾åˆ°å•Ÿå‹•æª”æ¡ˆï¼
    echo [æç¤º] è«‹å°‡æ­¤æª”æ¡ˆæ”¾åœ¨ insurance-news-aggregator ç›®éŒ„ä¸­
    echo.
    pause
    exit /b 1
)

:: æª¢æŸ¥Pythonè™›æ“¬ç’°å¢ƒ
set PYTHON_PATH=%~dp0venv\Scripts\python.exe
if not exist "%PYTHON_PATH%" (
    echo [éŒ¯èª¤] è™›æ“¬ç’°å¢ƒä¸å­˜åœ¨ï¼
    echo [è‡ªå‹•ä¿®å¾©] æ­£åœ¨æª¢æŸ¥ç³»çµ±Python...
    
    :: å˜—è©¦ä½¿ç”¨ç³»çµ±Python
    python --version >nul 2>&1
    if %ERRORLEVEL% EQU 0 (
        echo [ç™¼ç¾] æ‰¾åˆ°ç³»çµ±Pythonï¼Œå°‡ä½¿ç”¨ç³»çµ±Pythonå•Ÿå‹•
        set PYTHON_PATH=python
    ) else (
        echo [éŒ¯èª¤] ç„¡æ³•æ‰¾åˆ°Pythonï¼è«‹å®‰è£Pythonæˆ–è™›æ“¬ç’°å¢ƒ
        echo.
        pause
        exit /b 1
    )
) else (
    echo [ç¢ºèª] è™›æ“¬ç’°å¢ƒå­˜åœ¨ï¼š%PYTHON_PATH%
)

echo.
echo     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
echo     â–ˆ                 ç³»çµ±å•Ÿå‹•ä¸­...                â–ˆ
echo     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
echo.
echo     ðŸ“ æœå‹™åœ°å€: http://127.0.0.1:5000
echo     ðŸ  é¦–é :     http://127.0.0.1:5000/
echo     ðŸ“Š æ¥­å‹™å“¡å€: http://127.0.0.1:5000/business/
echo     ðŸ“ˆ æ™ºèƒ½åˆ†æž: http://127.0.0.1:5000/analysis
echo     ðŸ“ åé¥‹é é¢: http://127.0.0.1:5000/feedback
echo     ðŸ–¥ï¸  ç³»çµ±ç›£æŽ§: http://127.0.0.1:5000/monitor
echo.
echo     [æç¤º] ç³»çµ±å•Ÿå‹•å¾Œæœƒè‡ªå‹•é–‹å•Ÿç€è¦½å™¨
echo     [æ³¨æ„] è«‹ä¿æŒæ­¤è¦–çª—é–‹å•Ÿï¼Œé—œé–‰å³åœæ­¢æœå‹™
echo.

:: å»¶é²3ç§’å¾Œè‡ªå‹•é–‹å•Ÿç€è¦½å™¨
start /b timeout /t 3 /nobreak >nul && start http://127.0.0.1:5000

:: å•Ÿå‹•æ‡‰ç”¨
"%PYTHON_PATH%" apps\start_app.py

:: æ‡‰ç”¨é—œé–‰å¾Œçš„è™•ç†
echo.
echo     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
echo     â–ˆ                 æœå‹™å·²åœæ­¢                  â–ˆ
echo     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
echo.

if %ERRORLEVEL% NEQ 0 (
    echo     [éŒ¯èª¤] å•Ÿå‹•å¤±æ•—ï¼ŒéŒ¯èª¤ä»£ç¢¼ï¼š%ERRORLEVEL%
    echo     [æç¤º] è«‹æª¢æŸ¥ logs ç›®éŒ„ä¸­çš„æ—¥èªŒæª”æ¡ˆ
) else (
    echo     [ä¿¡æ¯] æœå‹™å·²æ­£å¸¸é—œé–‰
)

echo.
echo     æŒ‰ä»»æ„éµé€€å‡º...
pause >nul
exit /b %ERRORLEVEL%
